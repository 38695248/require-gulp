// 详细页设置坐标
;(function (factory) {
    if (typeof define === "function" && define.amd) {
        // AMD模式
        define([ "jquery" ], factory);
    } else {
        // 全局模式
        factory(jQuery);
    }
}(function ($) {
    $.fn.setTagPos = function(){
		var $this = $(this);
		var d_imgW = $this.width();
		var y_imgW = $this.attr("data-width");
		var proportion = d_imgW / y_imgW;
		$this.find(".item-tag").each(function(index, element) {
			var oldLeft = $(this).attr("data-left");
			var oldTop = $(this).attr("data-top");
			var newLeft = oldLeft*proportion;
			var newTop = oldTop*proportion;
			var p_w = d_imgW;
			var tag_form_w = $(this).find(".item-tag-form").width()+10;
			var flag_w = p_w - newLeft - tag_form_w;
			if(flag_w < 0){
				$(this).find(".item-tag-form").css({"right":24,"left":"auto"});
				$(this).find(".item-tag-form").find(".tip").addClass("tagRight");
			}
			$(this).css({"left":newLeft,"top":newTop}).addClass("loaded");
			
		});	
	};
}));