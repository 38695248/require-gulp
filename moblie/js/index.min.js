var Index = function(){ var indexInit = function(options){ var settings ={ mod:'' }; if(options){ $.extend(settings,options); } $("img.lazy").lazyload({ effect: "fadeIn", threshold:500, failurelimit:100, skip_invisible : false }); MasonryUtils.masonryInit({ masonry:"masonry_2", issearch:true, islazy:1, callback:function(){ } }); BaseInitClass.baseInit(); if(settings.mod == 'index'){ chooseFn.dhfixedTop({}); dhpjax(); function dhpjax(){ $("#choose_dh").find(".dhpjax").unbind("click").bind("click",function(){ var url = $(this).attr("data-url")+"&ajax=true"; $(this).addClass("current"); $(this).siblings(".dhpjax").removeClass("current"); $.ajax({ url: url, dataType: 'html', beforeSend: function(xhr){ $("#data-loading").remove(); $('#masonry_2').html('<div class="imgloading" style="height:180px; width:100%"></div>'); var nvnexttop = $('#masonry_2').offset().top; window.scrollTo(0,nvnexttop-45); }, success: function(data){ $('#masonry_2').html(data); $(window).unbind('.infscr'); MasonryUtils.masonryInit({ masonry:"masonry_2", issearch:true, islazy:1, callback:function(){ } }); } }) }); } } }; return {indexInit:indexInit} }(); 