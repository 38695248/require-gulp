define("config",["jquery"],function($){var base={lang:{js_base_login_tip:"您还没有登录，请先登录！",js_base_login_btn:"登录",js_base_del_text:"你确定删除吗？",js_base_delbord_text:"你确定删除这个分类吗？",js_base_error:"系统异常，请稍后再试！",js_base_email:"Not a valid email.",js_base_password:"valid",js_base_mb:"请填写正确的手机号码",js_base_code:"",js_base_deltag:"您要删除当前标签吗？",js_base_money:"valid",js_base_prev:"上一页",js_base_next:"下一页",js_base_tip:"系统提示",js_base_cancel:"取消",js_base_del:"删除",js_base_confirm:"确认",js_base_des:"描述",js_base_qty:"数量",js_base_price:"价格",js_base_total:"总价",js_base_checkout:"去结算",js_base_cart:"购物车内暂时没有商品。",js_base_scoretomoney:"请正确输入享金。",js_base_myscore:"请正确输入金额。",js_base_emailyz:"马上去验证",js_reg_maxMsg:"最多只能选择10个",js_shareView_like:"赞TA",js_shareView_unlike:"已赞TA",js_shareView_follow:"关注",js_shareView_unfollow:"已关注",js_shareView_want:"想要",js_shareView_unwant:"不想要",js_upload_chooseimage:"选择图片",js_cart_canceluse:"取消使用",js_cart_theuse:"本次使用",js_cart_coupons:"优惠卷",js_cart_Integral:"享金",js_cart_pay:"支付",js_cart_folding:"折合",js_cart_currency:"人民币",js_cart_payType:"百享",js_Q_EXCEED_NUM_LIMIT:"超过最大上传数",js_myshare_inviteSuccess:"邀请成功！",js_myshare_mailSuccess:"邮件发送成功！",js_myshare_orderNo:"订单编号",js_myshare_Onlinepayment:"在线支付",js_myshare_view:"查看",js_myshare_reup:"重新上传",js_myshare_perform:"您确定执行该操作吗?",js_myshare_Myself:"我自己",js_index_copytext:"邀请链接地址已经复制到粘贴板，你可以使用Ctrl+V贴到需要的地方去了哦！",js_base_categorytext:"选择分类！",js_base_yourself:"自己不能给自己发信息。",Q_EXCEED_SIZE_LIMIT:"图片文件总大小超过系统限制大小。",F_EXCEED_SIZE:"图片大小超过系统限制大小5M，请重新选择。",Q_TYPE_DENIED:"图片格式不对，只能上传jgif,jpg,jpeg,png图片",error:"系统提示",uptimeout:"亲，您的网络太慢，上传超时！请重新上传！",maxCategoryNum:"最多只能选15个分类。",certification:"你还没有通过实名认证，请先认证。",js_upavatartitle:"请从您手机选择头像上传",js_upshareimg:"请从手机相册选择图片",js_upproimg:"请从手机相册选择图片",js_shippingtotal:"包邮",js_order_sizes:"尺码",js_order_color:"颜色",js_order_for:"私定人",js_order_type_t:"团",js_order_type_p:"私"},getHeightBody:function(){var e=0;return this.browser.versions.ios||this.browser.versions.iPhone||this.browser.versions.iPad?e=window.screen.availHeight:this.browser.versions.android?e=$(window).height():e=$(window).height(),e},getWidthBody:function(){var e=0;return this.browser.versions.ios||this.browser.versions.iPhone||this.browser.versions.iPad?e=window.screen.availWidth:this.browser.versions.android?e=$("body").width():e=$("body").width(),e},browser:{versions:function(){var e=navigator.userAgent,t=navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},isNull:function(e){if(e=="")return!0;var t="^[ ]+$",n=new RegExp(t);return n.test(e)},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return n!=null?unescape(n[2]):null},loadInit:function(e){var t=$('<div id="loadingMask" class="loadingMask" style="z-index:999999"></div>'),n={status:1};e&&$.extend(n,e),n.status==1?$("body").append(t):$("#loadingMask").remove()}},tip={tips:function(e){var t={htmlmsg:"",title:base.lang.js_base_tip,type:1,istop:!1,position:"fixed",isShade:!0,touchmove:0,callback:function(){},scallback:function(){},dcallback:function(){},closeback:function(){},w:"96%"};e&&$.extend(t,e);var n='<div class="tipbox-in" data-index="0"><h1 class="tiptop">'+t.title+"</h1>"+'<span class="ico02 tipclose closeBtn"></span>'+'<form class="tipForm">'+'<div class="tipcont">'+t.htmlmsg+"</div>"+'<div id="tipbottom" class="tipbottom">'+'<div class="fr formFooterButtons">'+'<button class="btn-border btn rounded mr-5 btnCancel closeBtn" type="button">'+'<span class="buttonText">'+base.lang.js_base_cancel+"</span>"+"</button>"+'<button type="button" class="btn btn-danger btnTipsubmit">'+'<span class="buttonText">'+base.lang.js_base_confirm+"</span>"+"</button>"+"</div>"+'<div class="blank0"></div>'+"</div></form>"+"</div>",r=$(".modalMask").size(),i=$('<div id="tipbox_'+r+'" data-index="'+r+'" class="tipbox fade" style="width:'+t.w+'">'+n+"</div>");t.type==0&&i.find(".btnCancel").remove(),$("body").append(i),e.callback&&t.callback();var s="tipbox_"+r;this.currentPosition({divId:s,num:r,shade:t.isShade,position:t.position,istop:t.istop,touchmove:t.touchmove}),i.find(".closeBtn").unbind("click").bind("click",function(){var n=$(this).parents(".tipbox").attr("data-index"),r=$(this).parents(".tipbox");tip.tipsClosed({myIndeTipDiv:r,numIndex:n}),e.closeback&&t.closeback()}),i.find(".btnTipsubmit").unbind("click").bind("click",function(){var n=$(this).parents(".tipbox").attr("data-index"),r=$(this).parents(".tipbox");e.scallback&&t.scallback(),tip.tipsClosed({myIndeTipDiv:r,numIndex:n}),e.dcallback&&t.dcallback()})},centerDiv:function(e){var t={divId:"",isShade:!0,w:"96%",type:0,istop:!1,isbottom:!1,position:"absolute",p_new:0,touchmove:0,callback:function(){},zcallback:function(){},closeback:function(){}};e&&$.extend(t,e);var n=$(".modalMask").size();$("#"+t.divId).attr("data-index",n),$("#"+t.divId).css({width:t.w}),e.callback&&t.callback({num:n}),this.currentPosition({divId:t.divId,num:n,shade:t.isShade,position:t.position,callback:t.zcallback,istop:t.istop,touchmove:t.touchmove,isbottom:t.isbottom}),$(".closeBtnHtml").unbind("click").bind("click",function(){var n=$(this).parents(".tipbox").attr("data-index"),r=$(this).parents(".tipbox");tip.centerDivClosed({indexTipDiv:r,indexNum:n,type:t.type});var i=$("#bigcategorybox").attr("data-index");tip.centerDivClosed({indexNum:i,indexTipDiv:$("#bigcategorybox"),type:1}),e.closeback&&t.closeback()})},currentPosition:function(e){var t=e.position;if(t=="absolute")var n=this.getPageOffset().x+($("body").width()-$("#"+e.divId).width())/2,r=this.getPageOffset().y+(base.getHeightBody()-$("#"+e.divId).height())/2;else var n=($("body").width()-$("#"+e.divId).width())/2,r=(base.getHeightBody()-$("#"+e.divId).height())/2;var i=$(".modalMask").size()*90+9999,s=e.num;e.shade&&this.addShade({num:s,touchmove:e.touchmove}),r<=0&&!e.istop?r=20:e.istop&&(r=0),n<=0&&!e.istop?n=20:e.istop&&(n=0),e.isbottom==1?$("#"+e.divId).css({"z-index":i+1}).show():$("#"+e.divId).css({left:n,top:r,position:t,"z-index":i+1}).addClass("show loaded").show(),e.callback&&e.callback()},tipsClosed:function(e){var t=e.numIndex,n=e.myIndeTipDiv;n.remove(),$("#modalMask_"+t).remove(),e.callback&&e.callback()},centerDivClosed:function(e){var t={indexNum:"",indexTipDiv:"",type:0,callback:function(){}};e&&$.extend(t,e),t.type==1?(t.indexTipDiv.remove(),$("#modalMask_"+t.indexNum).remove()):t.type==2?(t.indexTipDiv.hide(),$("#modalMask_"+t.indexNum).remove()):(t.indexTipDiv.hide(),$("#modalMask_"+t.indexNum).hide()),e.callback&&t.callback()},addShade:function(e){var t=e.num,n=e.num*90+9998,r=document.createElement("div");r.id="modalMask_"+t,r.className="modalMask",$("body").append(r),$("#modalMask_"+t).show().css({"z-index":n}),e.touchmove==1&&$("#modalMask_"+t).bind("touchmove",function(e){e.preventDefault()})},getPageOffset:function(){var e={};return window.innerWidth?(e.x=window.pageXOffset,e.y=window.pageYOffset):document.documentElement&&document.documentElement.clientWidth?(e.x=document.documentElement.scrollLeft,e.y=document.documentElement.scrollTop):document.body.clientWidth&&(e.x=document.body.scrollLeft,e.y=document.body.scrollTop),e}},loginCheck=function(e){var t=!0;return islogin==0&&(e!=1&&tip.tips({htmlmsg:'<div style="padding:30px">'+base.lang.js_base_login_tip+"</div>",callback:function(){$(".btnTipsubmit").find(".buttonText").text(base.lang.js_base_login_btn)},scallback:function(){var e=encodeURIComponent(window.location.href);window.location.href="/index/reg.html?loginurl="+e+""}}),t=!1),t},shareweinxtip=function(e){var t=$(".share_tip").size(),n=$('<div id="share_bg_'+t+'" class="share_bg" data-index="'+t+'"></div>'),r=$('<div id="share_tip_'+t+'" class="share_tip '+e.class+'" data-index="'+t+'"></div>');$("body").append(n),$("body").append(r),$("#share_bg_"+t).show().css({"z-index":t+99990}),$("#share_tip_"+t).show().css({"z-index":t+99991}),e.callback&&e.callback($("#share_tip_"+t),$("#share_bg_"+t)),e.isclose!=0&&($("#share_tip_"+t).unbind("click").bind("click",function(){$("#share_tip_"+t).remove(),$("#share_bg_"+t).remove()}),$("#share_bg_"+t).unbind("click").bind("click",function(){$("#share_tip_"+t).remove(),$("#share_bg_"+t).remove()}))},closeTip=function(e,t){var n=e.attr("data-index"),r=1;t&&(r=t),tip.centerDivClosed({indexNum:n,indexTipDiv:e,type:r})},baiduShare=function(options){var settings={bdPic:"",bdText:"",url:"",title:"",desc:"",summary:"",site:"www.byshare.com",baidu:0};options&&$.extend(settings,options);if(settings.baidu==1){window._bd_share_config={common:{bdSnsKey:{tsina:3171756207},bdText:"",bdMini:"2",bdPic:settings.bdPic,bdStyle:"0",bdSize:"16"},share:{}};with(document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-(new Date)/36e5)]}else{var share_Sina=function(){return'<a href="http://v.t.sina.com.cn/share/share.php?url='+encodeURIComponent(settings.url)+"&amp;title="+settings.title+"&amp;appkey=3171756207&amp;pic="+settings.bdPic+'" target="_blank" class="byshare_sns byshare_tsina" title="分享到新浪微博"></a>'},share_qqQzone=function(){return'<a href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+encodeURIComponent(settings.url)+"&title="+encodeURI(settings.title)+"&pics="+settings.bdPic+"&summary="+encodeURI(settings.summary)+'" target="_blank" class="byshare_sns byshare_qzone" data-cmd="qzone" title="分享到QQ空间"></a>'},share_qq=function(){return'<a href="http://connect.qq.com/widget/shareqq/index.html?url='+settings.url+"&showcount=0&desc="+encodeURI(settings.desc)+"&summary="+encodeURI(settings.summary)+encodeURI(settings.url)+"&title="+encodeURI(settings.title)+"&site="+settings.site+"&pics="+settings.bdPic+'" class="byshare_sns byshare_qzone" data-cmd="qzone" title="分享到QQ空间"></a>'},share_weiXin=function(){wx.onMenuShareTimeline({title:"",link:"",imgUrl:"",success:function(){alert(11)},cancel:function(){alert(222)}})},html="";html+=share_qqQzone(),html+=share_Sina(),$("#share_sns").html(html)}},gzweixin=function(e){var t={callback:null,errcallback:null};$.extend(!0,t,e),ajax.ajaxInit({url:"/user/weixin_isguanzhu.html",params:{},callback:function(n){isback=1,$("#testStatus").text(n.status);if(n.status==1)isgzweixin=1,e.callback&&t.callback();else if(n.status==-1)islogin==0&&(window.location.href="/index/reg.html"),config.tip.tips({htmlmsg:'<div style="padding:30px">'+n.msg+"</div>",type:0,scallback:function(){window.location.href="http://mp.weixin.qq.com/s?__biz=MzA3NTM5Mzg2NA==&mid=206134523&idx=1&sn=b052274af6c6633a2e2db14c7a10e577#rd"}});else{var r=0;$(".headerbox").length>0&&(r=$(".headerbox").height()),$("#gzweixin").css({top:r}).show(),$("#gzclose").unbind("click").bind("click",function(){$("#gzweixin").hide()}),e.errcallback&&t.errcallback(n.msg)}}})},goTopExUtils=function(e){var t=e.divid;t.bind("click",function(){$("html,body").animate({scrollTop:0},100),t.hide()});var n=function(){return document.body.scrollTop+document.documentElement.scrollTop},r=function(e){navigator.appName=="Netscape"&&navigator.userAgent.toUpperCase().indexOf("CHROME")>0?document.body.scrollTop=e:document.documentElement.scrollTop=e};window.onscroll=function(){n()>0?t.fadeIn():t.fadeOut()}};return{base:base,tip:tip,loginCheck:loginCheck,shareweinxtip:shareweinxtip,closeTip:closeTip,baiduShare:baiduShare,gzweixin:gzweixin,goTopExUtils:goTopExUtils}}),define("ajax",["jquery","config"],function(e,t){var n=function(n){var r={url:"",type:"post",dataType:"json",params:{ajax:1},yzlogin:!1,isloading:!1,callback:function(){},errCallback:function(){}};n&&e.extend(!0,r,n);if(r.yzlogin){var i=t.loginCheck();if(!i)return!1}r.isloading==1&&t.base.loadInit({status:1}),e.ajax({url:r.url,type:r.type,dataType:r.dataType,data:r.params,success:function(i){r.isloading==1&&t.base.loadInit({status:0});if(i.status==900)return e(".loadingMask").remove(),t.tip.tips({htmlmsg:'<div style="padding:30px">'+t.base.lang.js_base_login_tip+"</div>",callback:function(){e(".btnTipsubmit").find(".buttonText").text(t.base.lang.js_base_login_btn)},scallback:function(){var e=window.location.href;window.location.href="/index/reg.html?loginurl="+e+""}}),!1;n.callback&&r.callback(i)},error:function(e){t.base.loadInit({status:0}),n.errCallback?r.errCallback(e):t.tip.tips({htmlmsg:'<div style="padding:30px">请求超时，请重试！</div>',type:0,scallback:function(){window.location.reload()}})}})};return{ajaxInit:n}}),define("comm/gzweixin",["jquery","config","ajax"],function(e,t,n){var r=function(r){if(isweixin!=1)return!1;var i={callback:null,errcallback:null};e.extend(!0,i,r),n.ajaxInit({url:"/user/weixin_isguanzhu.html",params:{},callback:function(n){isback=1,e("#testStatus").text(n.status);if(n.status==1)isgzweixin=1,r.callback&&i.callback();else if(n.status==-1)islogin==0&&(window.location.href="/index/reg.html"),t.tips({htmlmsg:'<div style="padding:30px">'+n.msg+"</div>",type:0,scallback:function(){window.location.href="http://mp.weixin.qq.com/s?__biz=MzA3NTM5Mzg2NA==&mid=206134523&idx=1&sn=b052274af6c6633a2e2db14c7a10e577#rd"}});else{var s=0;e(".headerbox").length>0&&(s=e(".headerbox").height()),e("#gzweixin").css({top:s}).show(),e("#gzclose").unbind("click").bind("click",function(){e("#gzweixin").hide()}),r.errcallback&&i.errcallback(n.msg)}}})};return{gzweixin:r}}),function(e){typeof define=="function"&&define.amd?define("plugin/checkImgExists",["jquery"],e):e(jQuery)}(function(e){e.fn.checkImgExists=function(t){e(this).each(function(n,r){var i=e(this),s=i.attr("data-original"),o=i.attr("src"),u=new Image;u.src=s,u.onload=function(){i.attr("src",s);if(t){var e={w:u.width,h:u.height};t(i,s,e)}},u.onerror=function(){t&&t(i,o)}})}}),function(e){typeof define=="function"&&define.amd?define("lazyload",["jquery"],e):e(jQuery)}(function(e){!function(e,t,n,r){var i=e(t);e.fn.lazyload=function(s){function o(){var t=0;f.each(function(){var n=e(this);if(!l.skip_invisible||n.is(":visible"))if(!e.abovethetop(this,l)&&!e.leftofbegin(this,l))if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else n.trigger("appear"),t=0})}var u,f=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="};return s&&(r!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),r!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(l,s)),u=l.container===r||l.container===t?i:e(l.container),0===l.event.indexOf("scroll")&&u.bind(l.event,function(){return o()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",l.placeholder),n.one("appear",function(){if(!this.loaded){if(l.appear){var r=f.length;l.appear.call(t,r,l)}e("<img />").bind("load",function(){var r=n.attr("data-"+l.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[l.effect](l.effect_speed),t.loaded=!0;var i=e.grep(f,function(e){return!e.loaded});if(f=e(i),l.load){var s=f.length;l.load.call(t,s,l)}}).attr("src",n.attr("data-"+l.data_attribute))}}),0!==l.event.indexOf("scroll")&&n.bind(l.event,function(){t.loaded||n.trigger("appear")})}),i.bind("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&f.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){o()}),this},e.belowthefold=function(n,s){var o;return o=s.container===r||s.container===t?(t.innerHeight?t.innerHeight:i.height())+i.scrollTop():e(s.container).offset().top+e(s.container).height(),o<=e(n).offset().top-s.threshold},e.rightoffold=function(n,s){var o;return o=s.container===r||s.container===t?i.width()+i.scrollLeft():e(s.container).offset().left+e(s.container).width(),o<=e(n).offset().left-s.threshold},e.abovethetop=function(n,s){var o;return o=s.container===r||s.container===t?i.scrollTop():e(s.container).offset().top,o>=e(n).offset().top+s.threshold+e(n).height()},e.leftofbegin=function(n,s){var o;return o=s.container===r||s.container===t?i.scrollLeft():e(s.container).offset().left,o>=e(n).offset().left+s.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document)}),define("base",["jquery","config","ajax","comm/gzweixin","plugin/checkImgExists","lazyload"],function(e,t,n,r){var i=function(){if(e("#viewpage").size()<=0&&e("#index_ad").size()<=0){var t=e(".headerbox").height();e(".mainbox").css({"padding-top":t})}e("img.lazy,img.avatar_lazy").lazyload({effect:"fadeIn",threshold:500,failurelimit:100,skip_invisible:!1}),e("body").delegate(".back-btn","click",function(){window.history.back()}),e(".cartItemnum").size()>0&&a(),s(),c(),f(),u({topdiv:e("#topButton")}),r.gzweixin({}),l(),o()},s=function(){function t(t){var o=e('<div id="search-modalMask" class="modalMask" style="z-index:9996;display: block"></div>');e("body").append(o);var u="/common/gettpl.html?name=sns_searchinput&ch=sns";t.searchtype=="weixingroup"&&(u="/common/gettpl.html?name=sns_searchgroup&ch=sns"),n.ajaxInit({url:u,type:"GET",dataType:"html",params:{},callback:function(t){e("body").append(t);var o="goods";e("#searchinput").addClass("loaded"),e("#newsearchInt").focus(),e("#searchtyleval").val(o),r(),s(),i(),e("#qingkong_btn").unbind("click").bind("click",function(){n.ajaxInit({url:"/m_search/clearwords.html",params:"",callback:function(t){t.status==1&&(e("#searchTagbox").html(""),e("#qingkong_btn").hide())}})})}})}function r(){e("#s-input-tab-txt").unbind("click").bind("click",function(){var t=e("#J_TabNav").is(":hidden");t?e("#J_TabNav").show():e("#J_TabNav").hide()}),e("#s-input-tab-txt").find("li").unbind("click").bind("click",function(){var t=e(this).text(),n=e(this).attr("data-val");e("#s-input-val").text(t),e("#s-input-val").attr("data-type",n),e("#searchtyleval").val(n),s()})}function i(){e("#closeSearch,#search-modalMask").unbind("click").bind("click",function(){e("#searchinput").remove(),e("#search-modalMask").remove()})}function s(t){function s(){n.ajaxInit({url:"/m_search/getwordlists.html?t="+r+"&s="+i+"",params:{},callback:function(t){if(t.status){e("#searchTagbox").show();var n=t.data.keyword,s='<li class="li-title">历史记录</li>';i==""&&(s='<li class="li-title">历史记录</li>',e("#qingkong_btn").show()),e.each(n,function(e,t){s+='<li><a href="/m_search/search.html?t='+r+"&s="+encodeURIComponent(t.val)+'" data-val='+t.val+">"+t.val+"</a></li>"}),e("#searchTagbox").html(s)}else e("#searchTagbox").hide(),e("#qingkong_btn").hide()}})}var r=e("#searchtyleval").val(),i="";e("#newsearchInt").unbind("input").bind("input",function(){var t=e(this);r=e("#s-input-val").attr("data-type"),i=e.trim(t.val()),s()}),s()}e(".searchstart").unbind("focus").bind("focus",function(){var n=e(this).attr("data-placeholder"),r=e(this).attr("data-searchtype");t({placeholder:n,searchtype:r})}),e(".searchtop").unbind("click").bind("click",function(){var n=e(this).attr("data-placeholder"),r=e(this).attr("data-searchtype");t({placeholder:n,searchtype:r})})},o=function(){function n(e){var t=document.body.scrollTop,e=e||function(){};window.addEventListener("scroll",function(){var n=document.body.scrollTop,r=n-t;if(r===0)return!1;e(r>0?"down":"up"),t=n},!1)}var t=e("#carfooter").size()>0?1:0;n(function(n){var r=n;r=="up"?(e("#headerbox").show(),t||e("#footerbox").show()):r=="down"&&(t||e("#footerbox").hide(),e("#headerbox").hide())})},u=function(t){var n=t.topdiv;n.bind("click",function(){e("html,body").animate({scrollTop:0},100),n.hide()});var r=function(){return document.body.scrollTop+document.documentElement.scrollTop},i=function(e){navigator.appName=="Netscape"&&navigator.userAgent.toUpperCase().indexOf("CHROME")>0?document.body.scrollTop=e:document.documentElement.scrollTop=e};window.onscroll=function(){r()>0?n.fadeIn():n.fadeOut()}},a=function(){if(islogin==0)return e(".cartItemnum").hide(),!1;n.ajaxInit({url:"/myorder/getcart.html",params:{partdata:"goods"},callback:function(t){var n=t.data.itemnum;n>0?(e(".cartItemnum").html(n).show(),e(".cartItemnum").html(n).show()):(e(".cartItemnum").hide(),e(".cartItemnum").html(n).show())}})},f=function(){var t=e("#send").attr("data-suid");n.ajaxInit({url:"/message/getmsgnum.html",params:{suid:t},callback:function(t){t.status==1&&e(".infomore_num,.infomnum").text(t.data.num).show()}}),e(".infomore_btn").unbind("click").bind("click",function(){var t=e(this).parents(".top_r"),n=t.find(".infomore").is(":hidden");n?t.find(".infomore").show():t.find(".infomore").hide(),e(document).unbind("click").bind("click",function(n){var r=e(n.target);r.closest(e(".infomore_btn")).length==0&&t.find(".infomore").hide()})})},l=function(){if(urlfee_fromsuid&&urlfee_url){setTimeout(e,5e3);function e(){n.ajaxInit({url:"/mk_market/urlfee.html",params:{fromsuid:urlfee_fromsuid,url:urlfee_url},callback:function(e){}})}}},c=function(){e(".shareUpload").unbind("click").bind("click",function(){e("#addbox").show(),e("body").css({overflow:"hidden"}),e("#addbox_bg,#addbox_btn").unbind("click").bind("click",function(){e("#addbox").hide(),e("body").css({overflow:"auto"})})}),e(".add-share").unbind("click").bind("click",function(){var n=e(this).attr("data-ismjx"),r=t.loginCheck();if(!r)return!1;require(["up"],function(e){e.uploadInit({tip:!0,uptitle:"请选择1~5张图片上传",yzlogin:!0,container:"allcontainer",browse_button:"allpickfiles",drop_element:"allcontainer",isarray:!0,bucket:"share",isarray:!0,multi_selection:!0,auto_start:!0,fileNumLimit:5,callback:function(t){var r=t;e.successFun(r,{ismjx:n})},bcallback:function(){}})})})};return{init:i,getCartInit:a}}),function(e){typeof define=="function"&&define.amd?define("checkInput",["jquery"],e):e(jQuery)}(function(e){var t={validatetype:0,myIt:{},regulars:{email:[/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/,""],password:[/^[\@A-Za-z0-9\!\#\$\%\^\&\*\.\~]{6,22}$/,""],mobile:[/^((134[0-8]{1})|(13[0,1,2,3,5,6,7,8,9]\d)|(15[0,1,2,3,5,6,7,8,9]\d)|(17[0|1|2|3|(5-9)]\d)|(18[0|1|2|3|(5-9)]\d)|(14[5,7]\d))\d{7}$/,""],code:[/^[A-Za-z0-9]{4}$/,""],money:[/^\d+(\.\d{1,2})?$/,""],moneyandempty:[/^(?:(?!0)\d*|0|\s*)(?:\.\d+)?$/,""],num:[/^(\d+){1,13}$/,""],everyone:[/^(\w+)$/,""],mailmoblie:[/^(1[34578]\d{9})|(([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2}))$/,""]},inputs:{isempty:{isempty:[0],focusMsg:"",rightMsg:"",errorMsg:"valid"},Email:{type:"email",focusMsg:"",rightMsg:""},Pwd:{type:"password",focusMsg:"",rightMsg:""},Pwd1:{type:"eq",focusMsg:"",rightMsg:"",errorMsg:"",eqto:"Pwd"},Code:{type:"code",focusMsg:"",rightMsg:""},Money:{type:"money",focusMsg:"",rightMsg:""},moneyandempty:{type:"moneyandempty",focusMsg:"",rightMsg:""},num:{type:"num",focusMsg:"",rightMsg:""},Mobile:{type:"mobile",focusMsg:"",rightMsg:""},mailmoblie:{type:"mailmoblie",focusMsg:"",rightMsg:""}},tipStatu:function(e,n,r){n.data("tip")&&(t.validatetype==0?(n.removeClass("right_validate error_validate").addClass(e+"_validate"),n.parents(".validatebox").removeClass("right_validate error_validate").addClass(e+"_validate")):n.data("tip").removeClass("focus_tip right_tip error_tip ajax_checking_tip").addClass(e+"_tip").html(r?r:"").css({top:-2,right:5}))},checkEq:function(e,n,r){return e.type=="eq"&&e.eqto?n.val()!==""&&n.val()==n.parents("form").find("[data-validate='"+e.eqto+"']").val()?(t.tipStatu("right",n,e.rightMsg),!0):(t.tipStatu("error",n,e.errorMsg),!1):!0},isempty:function(e,n){var r=n.val().length;return e.isempty?r>0?(t.tipStatu("right",n,e.rightMsg),!0):(t.tipStatu("error",n,e.errorMsg),!1):!0},checkLength:function(e,n){var r=n.val().length;if(e.length){var i=e.length;return r>=e.length[0]&&r<=e.length[1]?(t.tipStatu("right",n,e.rightMsg),!0):(t.tipStatu("error",n,e.errorMsg),!1)}return!0},checkBet:function(e,n){if(e.between){var r=e.between;return n.val()>=e.between[0]&&n.val()<=e.between[1]?(t.tipStatu("right",n,e.rightMsg),!0):(t.tipStatu("error",n,e.errorMsg),!1)}return!0},checkReg:function(n,r,i,s){if(t.regulars[n.type]){if(n.type=="mailmoblie")var o=t.regulars.email;else var o=t.regulars[n.type];if(o[0].test(r.val()))return e(r).removeClass("err_border"),t.tipStatu("right",r,n.rightMsg),s&&s(),!0;if(n.type=="mailmoblie"){var o=t.regulars.mobile;if(o[0].test(r.val()))return e(r).removeClass("err_border"),t.tipStatu("right",r,n.rightMsg),s&&s(),!0}return e(r).addClass("err_border"),t.tipStatu("error",r,o[1]),!1}return!0},ajaxCheck:function(n,r,i){if(n.ajaxCheck){var s=n.ajaxCheck,o=!1;for(var u in s.data)s.data[u]=e("#"+u).val();return e.ajax({url:s.url,type:"post",dataType:"json",timeout:5e3,async:!1,data:s.data,success:function(e){e.status==1?(i&&i(),t.tipStatu("right",r,e.Msg),o=!0):e.State==0?(t.tipStatu("error",r,e.Msg),o=!1):o=!1},error:function(){t.tipStatu("error",r,"Network Error"),o=!1}}),o}return!0},initContext:function(t,n){if(!t.data("tip")&&t.attr("data-validate")&&n[t.attr("data-validate")]){var r=e("<p class='input_tip'></p>");t.data("tip",r).data("set",n[t.attr("data-validate")]),t.after(r)}},mycheckIn:function(e,n,r,i){if(e.data("tip")){var s=e.data("set");return t.checkReg(s,e,r,i)&&t.checkEq(s,e,n)&&t.checkBet(s,e)&&t.checkLength(s,e)&&t.ajaxCheck(s,e,r)&&t.isempty(s,e)}return!0},smycheckIn:function(e,n,r,i){if(e.data("tip")){var s=e.data("set");return t.checkReg(s,e,r,i)&&t.checkEq(s,e,n)&&t.checkBet(s,e)&&t.checkLength(s,e)&&t.isempty(s,e)}return!0}};e.fn.checkInput=function(n){n.inputs||(n.inputs=t.inputs);var r={validatetype:0,inputs:{},regulars:{},button:"",buttonDiv:"",onButtonClick:e.noop,beforeSubmit:e.noop,submitBtnFn:e.noop,mycallback:e.noop,checkAll:e.noop},i=e.extend(!0,r,n);t.inputs=e.extend(!0,t.inputs,i.inputs);var s=t.inputs;t.validatetype=i.validatetype,t.myIt=s,t.regulars=e.extend(!0,t.regulars,i.regulars);var o=e(this);return this.undelegate("input,textarea,select","blur").delegate("input,textarea,select","blur",function(){var n=e(this).attr("data-callback"),r=e(this).attr("data-ismust"),s=e(this).val();!r||s!=""?n==1?t.mycheckIn(e(this),o,"",i.mycallback):t.mycheckIn(e(this),o):e(this).data("tip").hide(),t.inputs}),this.undelegate("input,textarea,select","focus").delegate("input,textarea,select","focus",function(){t.initContext(e(this),s),e(this).siblings(".input_tip").show();var n=e(this).data("set");e(this).data("tip")&&n.focusMsg&&t.tipStatu("focus",e(this),n.focusMsg)}),this.submit(function(n){var r=!0,u=e(n.target);return e.each(u.find("input,textarea,select"),function(n,i){var u=e(this).attr("data-ismust"),a=e(this).val();if(!u||a!="")t.initContext(e(i),s),e(i).siblings(".input_tip").show(),r=t.smycheckIn(e(i),o)&&r}),r?(n.preventDefault(),i.submitBtnFn(o),!1):(n.preventDefault(),i.beforeSubmit(n,r,u),!1)}),i.button&&this.find(i.button).unbind("click").bind("click",function(n){var r=e(this),u=!0,a=e(n.target);return e.each(o.find("input,textarea,select"),function(n,r){var i=e(this).attr("data-ismust"),a=e(this).val();if(!i||a!="")t.initContext(e(r),s),e(r).siblings(".input_tip").show(),u=t.smycheckIn(e(r),o)&&u}),u?(n.preventDefault(),i.submitBtnFn(o,r),!1):(n.preventDefault(),i.beforeSubmit(n,u,a),!1)}),i.buttonDiv&&e("body").delegate(i.buttonDiv,"click",function(n){var r=!0,u=e(n.target);return e.each(o.find("input,textarea,select"),function(n,i){var u=e(this).attr("data-ismust"),a=e(this).val();if(!u||a!="")t.initContext(e(i),s),e(i).siblings(".input_tip").show(),r=t.smycheckIn(e(i),o)&&r}),r?(n.preventDefault(),i.submitBtnFn(o),!1):(n.preventDefault(),i.beforeSubmit(n,r,u),!1)}),this}}),function(e){typeof define=="function"&&define.amd?define("serializeJson",["jquery"],e):e(jQuery)}(function(e){e.fn.serializeJson=function(){var t={},n=this.serializeArray(),r=this.serialize();return e(n).each(function(){t[this.name]?e.isArray(t[this.name])?t[this.name].push(this.value):t[this.name]=[t[this.name],this.value]:e("input[name="+this.name+"]").attr("isarray")=="true"?(t[this.name]=new Array,t[this.name].push(this.value)):t[this.name]=this.value}),t}}),define("address",["jquery","config","base","ajax","checkInput","serializeJson"],function(e,t,n,r){var i="",s=function(){m(i)},o=function(){var n='<div id="addressbox" class="addressbox"><form id="addressform" method="post"><div id="add_headerbox" class="headerbox"><div class="rowbox searchbox"><div class="top_l"> <a href="javascript:void(0);" id="back-address" class="back-address rel" data-level="0"> <span class="b_ico ico-back-h"></span> </a> </div><div class="row-flex1 text-center h2_title">收货地址管理</div></div><div id="address_cont" class="address_cont"><ul id="addressedit" class="jsbox f16 color-333 jsbox_mt0" style="display:none"><li id="address_row" class="rowbox"><div class="row-flex1"><p id="add_str_text">广东省广州市天河区</p><p class="f12 color-999 edit_text">所在地区</p><input id="add_str" name="add_str" type="hidden" /><input id="add_ids" name="add_ids" type="hidden" /></div><div class="ico ico-jt mt-10"></div></li><li id="townSelRow" class="rowbox"><div class="row-flex1"><input id="add_str_2" class="noborder edit_input" name="add_str_2" type="text" placeholder="请选择街道" style="padding-left:0" readonly /><p class="f12 color-999 edit_text">街道</p></div><div class="ico ico-jt mt-10"></div></li><li class="rowbox li_edit"><div class="row-flex1"><input id="add_more" name="add_more" type="text" value="" placeholder="请输入详细地址" class="noborder edit_input" style="padding-left:0" data-validate="isempty" /><p class="f12 color-999 edit_text">详细地址</p></div><div class="ico ico-jt mt-10"></div></li><li class="rowbox li_edit"><div class="row-flex1"><input id="addressee" name="addressee" type="text" value="" placeholder="请输入收货人姓名" class="noborder edit_input" style="padding-left:0" data-validate="isempty" /><p class="f12 color-999 edit_text">收货人姓名</p></div><div class="ico ico-jt mt-10"></div></li><li class="rowbox li_edit"><div class="row-flex1"><input type="text" id="cellphone" name="cellphone" value="" placeholder="请输入收货人手机号码" class="noborder edit_input" style="padding-left:0" data-validate="Mobile" /><p class="f12 color-999 edit_text">收货人手机号码</p></div><div class="ico ico-jt mt-10"></div></li><li class="rowbox li_edit"><div class="row-flex1"><input type="text" id="zip" name="zip" value="" placeholder="请输入邮编" class="noborder edit_input" style="padding-left:0" /><p class="f12 color-999 edit_text">邮编</p></div><div class="ico ico-jt mt-10"></div></li><li class="rowbox" for="sedefault"><div class="row-flex1"><label><input type="checkbox" name="sedefault" id="sedefault" style="width:20px;padding:0; margin-bottom:-10px"/>设置为默认收货地址</label><p class="f12 color-999 edit_text">默认收货地址</p></div><div class="ico ico-jt mt-10"></div></li></ul><ul id="townSelRow_list" class="jsbox jsbox_mt0" style="display:none"></ul><div id="divsionSelect" style="display:none"><ul id="selected" class="jsbox jsbox_mt0" style="display:none"></ul><ul id="forselect" class="jsbox jsbox_mt0"></ul></div></div></div><div class="footerbox rowbox" style="padding:10px 0;z-index:99999"><input id="addrid_edt" name="addrid" type="hidden" /><div class="row-flex1 text-left"><button id="delBtn" type="button" class="btn w150">删除</button></div><div class="row-flex1 text-right"><button type="button" class="btn btn-danger w150 address_sub_btn">保存</button></div></div></form></div>';e("body").append(n);var r=t.base.getHeightBody();e("#add_headerbox").css({height:r,"z-index":99998}),e("#address_cont").css({height:r-60})},u=function(t){o(),t.act=="add"?(e("#add_headerbox").addClass("address_add"),h(),g({act:t.act})):(e("#add_headerbox").addClass("address_edt"),v({act:t.act,addrid:t.addrid,callback:function(e){g({act:"edt"})}})),a(),f(),l(),e("#addressedit").on("click",".li_edit",function(){e(this).addClass("li_edit_current"),e(this).siblings(".li_edit").removeClass("li_edit_current"),e(this).find(".edit_input").focus()}),e("#back-address").on("click",function(){var n=e(this).attr("data-level"),r=e(this).attr("data-state"),i=e(this).attr("data-city");n==0||n==3?e("#addressbox").remove():n==1?t.act=="add"?(h(),e(this).attr("data-level",0),e("#selected").html("").hide()):(e(this).attr("data-level",0),e("#addressedit").show(),e("#divsionSelect").hide()):n==2&&(e(this).attr("data-level",1),e("#selected").find(".li_click").each(function(t,n){var r=e(this).attr("data-level");r==2&&e(this).remove()}),p({thisId:r}))})},a=function(){e("#selected").on("click",".li_click",function(){var t=e(this).attr("data-parentid"),n=e(this).attr("data-level");e("#back-address").attr("data-level",n-1),t>0?(p({thisId:t}),e(this).remove()):(h(),e("#selected").html("").hide()),e("#add_str_2").attr("data-id",""),e("#add_str_2").val(""),e("#townSelRow_list").hide(),e("#divsionSelect").show(),e("#addressedit").hide()})},f=function(){e("#address_row").off("click").on("click",function(){var t=e(this).attr("data-state"),n=e(this).attr("data-city"),r=e(this).attr("data-county");e("#back-address").attr("data-level",2),t>0?(e("#selected").html(""),d({callback:function(r){e.each(r.data,function(n,r){if(r.id==t){var i='<li class="li_click" data-level="'+r.level+'" data-name="'+r.name+'" data-id="'+r.id+'" data-parentid="0">'+r.name+"</li>";e("#selected").append(i);return}}),d({upid:t,callback:function(r){e.each(r.data,function(r,i){if(i.id==n){var s='<li class="li_click" data-level="'+i.level+'" data-name="'+i.name+'" data-id="'+i.id+'" data-parentid="'+t+'">'+i.name+"</li>";e("#selected").append(s);return}}),d({upid:n,callback:function(t){t.data.length<=0?e("#forselect").hide():e("#forselect").show();var r="";e.each(t.data,function(e,t){r+='<li class="li_click" data-level="'+t.level+'" data-name="'+t.name+'" data-id="'+t.id+'" data-parentid="'+n+'">'+t.name+"</li>"}),e("#forselect").html(r)}})}})}}),e("#divsionSelect,#selected").show(),e("#addressedit").hide(),c()):(h(),g({act:"edt"}))})},l=function(){e("#townSelRow").off("click").on("click",function(t){var n=e(this).attr("data-townid");if(n<=0)return!1;d({upid:n,callback:function(t){var n="";e.each(t.data,function(e,t){n+='<li class="li_click" data-level="'+t.level+'" data-name="'+t.name+'" data-id="'+t.id+'" data-isleaf="0">'+t.name+"</li>"}),e("#townSelRow_list").html(n).show(),e("#divsionSelect").hide(),e("#addressedit").hide(),e("#townSelRow_list").off("click").on("click",".li_click",function(){var t=e(this).attr("data-name"),n=e(this).attr("data-id");e("#add_str_2").attr("data-id",n),e("#add_str_2").val(t);var r=e("#address_row").attr("data-state")+"_"+e("#address_row").attr("data-city")+"_"+e("#address_row").attr("data-county")+"_"+n;e("#add_ids").val(r),e("#townSelRow_list").hide(),e("#divsionSelect").hide(),e("#addressedit").show()})}})})},c=function(){e("#forselect").off("click").on("click",".li_click",function(){var t=e(this).attr("data-id"),n=e(this).attr("data-level"),r=e(this).attr("data-name"),i=e(this);e("#back-address").attr("data-level",n),n==1?e("#address_row,#back-address").attr("data-state",t):n==2?e("#address_row,#back-address").attr("data-city",t):n==3&&(e("#address_row,#back-address").attr("data-county",t),e("#add_str_2").val(""),e("#add_str_2").attr("data-id","")),p({thisId:t,thislevel:n,callback:function(s){if(s.data.length<=0||n>2){e("#divsionSelect").hide(),e("#addressedit").show();var o="",u="";e("#selected").find("li").each(function(t,n){var r=e(this).attr("data-name"),i=e(this).attr("data-id");o+=r,u+=i+"_"}),o+=r,u+=t+"_",e("#townSelRow").attr("data-townid",t),e("#add_ids").val(u),e("#add_str_text,#add_str").text(o),e("#add_str").val(o),s.data.length<=0?(e("#forselect").hide(),e("#townSelRow").hide()):(e("#forselect").show(),e("#townSelRow").show())}else e("#selected").append(i).show()}})})},h=function(n){d({callback:function(n){if(n.status==1){var r="";e.each(n.data,function(e,t){r+='<li class="li_click" data-level="'+t.level+'" data-name="'+t.name+'" data-id="'+t.id+'" data-parentid="0" data-isleaf="0">'+t.name+"</li>"}),e("#forselect").html(r).show(),e("#divsionSelect").show(),e("#addressedit").hide(),c()}else t.tip.tips({htmlmsg:'<div style="padding:30px">'+n.msg+"</div>",w:"96%",type:0})}})},p=function(t){d({upid:t.thisId,callback:function(n){var r="";e.each(n.data,function(e,n){r+='<li class="li_click" data-level="'+n.level+'" data-name="'+n.name+'" data-id="'+n.id+'" data-parentid="'+t.thisId+'"  data-isleaf="0">'+n.name+"</li>"}),e("#forselect").html(r).show(),t.callback&&t.callback(n)}})},d=function(e){r.ajaxInit({url:"/common/district_son.html",params:{upid:e.upid},callback:function(t){e.callback&&e.callback(t)}})},v=function(n){r.ajaxInit({url:"/myorder/address.html",params:{act:"get",addrid:n.addrid},callback:function(s){s.status==1&&(e("#addressedit").show(),e("#addrid_edt").val(n.addrid),e("#addressee").val(s.data.addressee),e("#add_str_text").text(s.data.address1),e("#add_str").val(s.data.address1),e("#add_ids").val(s.data.state+"_"+s.data.city+"_"+s.data.county+"_"+s.data.town),e("#add_more").val(s.data.more),e("#zip").val(s.data.zip),e("#cellphone").val(s.data.cellphone),s.data.town?e("#add_str_2").val(s.data.address2):e("#townSelRow").hide(),s.data.addrid==i&&e("#sedefault").attr("checked","checked"),e("#address_row").attr("data-state",s.data.state),e("#address_row").attr("data-city",s.data.city),e("#address_row").attr("data-county",s.data.county),e("#townSelRow").attr("data-townid",s.data.county),e("#delBtn").show().unbind("click").bind("click",function(){r.ajaxInit({url:"/myorder/address.html",params:{act:"del",addrid:n.addrid},callback:function(n){n.status==1?(m(),t.tip.tips({htmlmsg:'<div style="padding:30px">'+n.msg+"</div>",w:"96%",type:0}),e("#addressbox").remove()):t.tip.tips({htmlmsg:'<div style="padding:30px">'+n.msg+"</div>",w:"96%",type:0})}})}),n.callback&&n.callback(s))}})},m=function(t){r.ajaxInit({url:"/myorder/address.html",params:{act:"list"},callback:function(t){var n=t.data;if(n.length<=0)return e("#addrid").html('<p id="newaddress" class="addAddressBtn" data-address="0" data-act="add" style="padding:0 5px; margin:5px 0">请填写收货人信息</p>'),y(),!1;var r="";e.each(n,function(e,t){var n=t.address1+" "+t.address2+" "+t.more+" "+t.addressee+" "+t.cellphone,s="";t.default==1&&(s='checked="checked"',i=t.addrid);var o='<li class="rowbox mt-5"><div class="row-flex1 rowbox"><input name="addrid" id="'+t.addrid+'" type="radio" value="'+t.addrid+'" '+s+'><label style="line-height:20px" for="'+t.addrid+'">'+n+'</label></div><div class="w100 text-right"><a href="javascript:void(0);" class="addAddressBtn"  data-address="1" data-addrid="'+t.addrid+'" data-act="edt">编辑<div class="ico ico-jt ml-5"></div></a></div></li>';r+=o}),e("#addrid").html(r),y()}})},g=function(n){e("#addressform").checkInput({button:".address_sub_btn",submitBtnFn:function(i){var s=i.serializeJson();s.act=n.act,r.ajaxInit({url:"/myorder/address.html",params:s,callback:function(n){n.status==1?t.tip.tips({htmlmsg:'<div style="padding:30px">'+n.msg+"</div>",w:"96%",type:0,callback:function(){m(),e("#addressbox").remove()}}):t.tip.tips({htmlmsg:'<div style="padding:30px">'+n.msg+"</div>",w:"96%",type:0})}})}})},y=function(){e(".addAddressBtn").unbind("click").bind("click",function(){var t=e(this).attr("data-address"),n=e(this).attr("data-addrid"),r=e(this).attr("data-act");u({act:r,addrid:n})}),e(".wxAddressBtn").unbind("click").bind("click",function(){var n=e(this).attr("data-addrid");r.ajaxInit({url:"/myorder/address.html?act=weixin_sign",params:{},callback:function(n){if(n.status==1){var i=n.data.sign_info;o();function s(){WeixinJSBridge.invoke("editAddress",i,function(n){var i={};i.act="add",i.nickname=n.username,i.cellphone=n.telNumber,i.zip=n.addressPostalCode,i.address1=n.addressCitySecondStageName+" "+n.addressCountiesThirdStageName+" "+n.addressDetailInfo,r.ajaxInit({url:"/myorder/address.html",params:i,callback:function(n){n.status==1?e("#sedefault").attr("checked"):t.tip.tips({htmlmsg:'<div style="padding:30px">'+n.msg+"</div>",w:"96%",type:0})}})})}function o(){typeof WeixinJSBridge=="undefined"?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",s,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",s),document.attachEvent("onWeixinJSBridgeReady",s)):s()}}}})})};return{init:s,getAddress:m}}),function(e){typeof define=="function"&&define.amd?define("plus",["jquery"],e):e(jQuery)}(function(e){e.fn.plus=function(t){function a(){r.decimal=r.isInt?0:r.decimal,i.unbind("click").bind("click",function(){var n=e(this).siblings(".number").find("input"),i=num=Number(n.val());num+=r.gradation,num=l(r.maxNum,r.minNum,num),n.val(num),t.callback&&r.callback(num,e(this),i)}),s.unbind("click").bind("click",function(){var n=e(this).siblings(".number").find("input"),i=num=Number(n.val());num-=r.gradation,num=l(r.maxNum,r.minNum,num),n.val(num),t.callback&&r.callback(num,e(this),i)}),o.unbind("click").bind("keyup",function(){var n=e(this).val(),i=e(this);if(n=="")return u=r.defaultNum,!1;if(!c(n,r.isInt)||!h(r.maxNum,parseInt(n)))return e(this).val(u),config.tip.tips({htmlmsg:'<div style="padding:30px">输入错误，请重新输入。</div>',type:0}),!1;t.callback&&r.callback(n,e(this))}),o.change(function(){var n=e(this).val();if(n=="")return u=r.defaultNum,!1;if(!c(n,r.isInt)||!h(r.maxNum,parseInt(n)))return e(this).val(u),config.tip.tips({htmlmsg:'<div style="padding:30px">The number you entered exceeds the maximum value or not in the correct format</div>'}),!1;t.callback&&r.callback(n,e(this))}),o.on("blur",function(){if(e(this).val()=="")return e(this).val(r.defaultNum),!1;e(this).val(Number(e(this).val()).toFixed(r.decimal))})}function f(){i.siblings(".number").find("input").val(1),i.unbind("click"),s.unbind("click")}function l(e,t,n){return n=n>e?e:n,n=n<t?t:n,n}function c(e,t){if(t){var n=/^-?[1-9]\d*$/;return n.test(e)}return!isNaN(e)}function h(e,t){return e>t}var n=this,r={defaultNum:1,gradation:1,isInt:!0,decimal:2,minNum:1,maxNum:1e12,unbind:0,callback:function(){return!1}};t&&e.extend(r,t);var i=n.find(".plus"),s=n.find(".minus"),o=n.find(".number"),u=r.defaultNum;if(r.unbind==1)return f(),!1;a()}}),function(e){typeof define=="function"&&define.amd?define("hoverclick",["jquery"],e):e(jQuery)}(function(e){e.fn.hoverAndClickShow=function(t){var n=this,r={method:"hover",autoClose:!0,callback:function(){},bcallback:function(){}};t&&e.extend(r,t),r.method=="hover"&&n.hover(function(){e(this).find(".hide").addClass("show"),e(this).find(".addover").addClass("hover"),e(this).css({"z-index":99}).addClass("loadedShow"),e(this).find(".hideclose").unbind("click").bind("click",function(){e(this).parents(n).removeClass("show")}),t.callback&&r.callback(e(this))},function(){e(this).find(".hide").removeClass("show"),e(this).find(".addover").removeClass("hover"),e(this).css({"z-index":0}).removeClass("loadedShow")});if(r.method=="click"){var i=n.find(".cilckItem");i.unbind("click").bind("click",function(){var i=e(this);event.stopPropagation();var s=e(this).siblings(".hide");s.is(":hidden")?(s.addClass("show"),s.parents(n).css({"z-index":99}).addClass("loadedShow"),e(this).find(".ico-add").addClass("ico-del"),t.callback&&r.bcallback(i)):(s.removeClass("show"),s.parents(n).css({"z-index":0}).removeClass("loadedShow"),e(this).find(".ico-add").removeClass("ico-del")),r.autoClose&&(s.find(".hideclose").unbind("click").bind("click",function(){e(this).parents(s).removeClass("show"),e(this).parents(s).parents(n).removeClass("loadedShow")}),e(document).bind("click",function(t){var r=e(t.target);r.closest(s).length==0&&(s.removeClass("show"),s.parents(n).css({"z-index":0}).removeClass("loadedShow"))})),t.callback&&r.callback(n)})}}}),require.config({paths:{jquery:"libs/jquery-1.8.3.min",config:"comm/config",base:"comm/base",ajax:"comm/ajax",up:"comm/uploadUtils",pjax:"comm/pjax",mas:"comm/masonry",share:"comm/shareViewcomm",swiper:"libs/swiper.min",jquery_ui:"jqui/jquery-ui.min",infinitescroll:"plugin/jquery.infinitescroll.min",lazyload:"plugin/jquery.lazyload.min",jquerypjax:"plugin/jquery.pjax",baguettebox:"plugin/baguettebox.min",checkInput:"plugin/checkInput.min",checkImgExists:"plugin/checkImgExists",checkboxFn:"plugin/checkboxFn.min",serializeJson:"plugin/serializeJson.min",setTagPos:"plugin/setTagPos.min",stopscroll:"plugin/stopscroll.min",plus:"plugin/plus.min",countdown:"plugin/countdown.min",scrollToEnd:"plugin/scroll.min",fixedTop:"plugin/fixedTop.min",hoverclick:"plugin/hoverclick.min",jcrop:"jcrop/jquery.Jcrop.min"}}),require(["jquery","config","base","ajax","address","checkInput","plus","serializeJson","hoverclick"],function(e,t,n,r,i){var s=function(){n.init(),i.init(),o(),c()},o=function(t){var n="",r=e("#availshmoney").attr("data-availshmoney"),i="",s="";u(n,r,i,s)},u=function(n,i,s,o){var u=Number(n),f=i,l=s;e(".cartCoupons").hoverAndClickShow({method:"click",autoClose:!1,bcallback:function(t){var n=t,r=n.attr("data-status");l==0&&r&&n.siblings(".cartCouponList").html("<p class='color-red' style='padding-top:5px'>"+o+"</p>");var i=t.attr("data-type");if(i=="couponMoney"){s();function s(){var t=0,n="";return e("#couponList").find(".inputcheckbox").each(function(r,i){var s=e(this).attr("checked");s&&(t+=1,n=e(this).attr("data-val"))}),t>0?(e("#couponsInput").attr("readonly",!0),e("#couponsInput").val(n),!0):(e("#couponsInput").attr("readonly",!1),e("#couponsInput").val(""),!1)}e("#couponList").find(".inputcheckbox").unbind("click").bind("click",function(){var t=e(this).attr("checked");t&&e(this).parent(".checkbox-parent").siblings(".checkbox-parent").find(".inputcheckbox").attr("checked",!1),s()})}},callback:function(n){function s(n,i,s,f,l){s=="shareMoney"||s=="scoreMoney"?o({div:n,input:i,typepay:s}):r.ajaxInit({url:f,params:l,callback:function(r){if(r.status==1)if(r.data.money>0){e("#couponMoney").parents("li").show();var i=e("#couponsInput").val(),o=n.parents(".startbox").siblings(".endbox");o.find(".ccode").html("【"+i+"】"),o.find(".money").html(exrtitle+""+r.data.money+" "+'<span class="f12 color-999">'+exrcode+"</span>"),n.parents(".startbox").addClass("hide"),o.removeClass("hide"),a({act:"use",type:s,val:i})}else e("#couponMoney").parents("li").hide();else t.tip.tips({htmlmsg:'<div style="padding:30px">'+r.msg+"</div>",w:"96%",type:0}),s=="couponMoney"?e("#shareMoney").parents("li").hide():s=="scoreMoney"&&e("#scoreMoney").parents("li").hide()}}),u()}function o(e){var t=e.input,n=t.val(),r=f(t,n,1);if(!r)return!1;t.removeClass("error_validate"),n=Number(t.val()).toFixed(2),t.val(n);var i=e.div.parents(".startbox").siblings(".endbox");a({act:"use",type:e.typepay,val:n,callback:function(e){},errcallback:function(){t.val("")}})}function u(){e(".canceluseBtn").unbind("click").bind("click",function(){var t=e(this),n=e(this).attr("data-type");t.parents(".endbox").addClass("hide"),t.parents(".endbox").siblings(".startbox").removeClass("hide"),t.parents(".endbox").siblings(".startbox").find("input.textbox").val("");var r=t.parents(".endbox").siblings(".startbox");if(n=="scoreMoney")e("#scoreMoney").parents("li").hide();else if(n=="couponMoney"){e("#couponMoney").parents("li").hide(),i();function i(){var t=0,n="";return e("#couponList").find(".inputcheckbox").each(function(r,i){var s=e(this).attr("checked");s&&(t+=1,n=e(this).attr("data-val"))}),t>0?(e("#couponsInput").attr("readonly",!0),e("#couponsInput").val(n),!0):(e("#couponsInput").attr("readonly",!1),e("#couponsInput").val(""),!1)}}else n=="shareMoney"&&e("#shareMoney").parents("li").hide();a({act:"notuse",type:n,val:""})})}function f(e,t,n){var r=!1;if(n==1)var i=[/^\d+$|^\d+\.\d+$/g,""];else var i=[/^(\d+)$/,""];return i[0].test(t)&&t>0?(e.removeClass("error_validate"),r=!0,r):(e.addClass("error_validate"),r=!1,r)}var i=parseInt(e("#subtotalCont").attr("data-total"));e(".cartCoupon-Btn").unbind("click").bind("click",function(){var n=e(this),r=e(this).parents(".startbox").find("input"),i=n.attr("data-type"),o="",u="";if(i=="couponMoney"){var a=e("#totaldiscount").attr("data-totaldiscount");if(a>0)return t.tip.tips({htmlmsg:'<div style="padding:30px">您已享受“1元包邮”优惠，不能同时使用该优惠卷。</div>',type:0,scallback:function(){n.siblings("#couponsInput").val("")}}),!1;var f=e("#couponsInput").val();if(!f)return t.tip.tips({htmlmsg:'<div style="padding:30px">请输入优惠劵码</div>',type:0}),!1;o="/myorder/ckcashcoupon.html",u={qcode:f}}s(n,r,i,o,u)})}})},a=function(n){var i=n.type;r.ajaxInit({url:"/myorder/count_pay.html",params:{act:n.act,type:n.type,val:n.val},callback:function(r){if(r.status==1)e("#pay_shmoney").html(r.data.pay_shmoney),e("#pay_score").html(r.data.pay_score),e("#couponMoney").html(exrtitle+""+r.data.pay_couponmoney+" "+'<span class="f12 color-999">'+exrcode+"</span>"),e("#scoreMoney").html(exrtitle+""+r.data.pay_score+" "+'<span class="f12 color-999">'+exrcode+"</span>"),e("#shareMoney").html(exrtitle+""+r.data.pay_shmoney+" "+'<span class="f12 color-999">'+exrcode+"</span>"),e("#availscore").html(r.data.availscore),e("#availshmoney").html(r.data.availshmoney),e("#topaytotal").html(r.data.topaytotal),i=="shareMoney"?r.data.pay_shmoney>0?e("#shareMoney").parents("li").show():e("#shareMoney").parents("li").hide():i=="scoreMoney"&&(r.data.pay_score>0?e("#scoreMoney").parents("li").show():e("#scoreMoney").parents("li").hide()),r.data.pay_shmoney>0?(e("#shmoneyInt").parents(".startbox").addClass("hide"),e("#shmoneyInt").parents(".startbox").siblings(".endbox").removeClass("hide")):(e("#shmoneyInt").parents(".startbox").removeClass("hide"),e("#shmoneyInt").parents(".startbox").siblings(".endbox").addClass("hide")),r.data.pay_score>0?(e("#scoreInt").parents(".startbox").addClass("hide"),e("#scoreInt").parents(".startbox").siblings(".endbox").removeClass("hide")):(e("#scoreInt").parents(".startbox").removeClass("hide"),e("#scoreInt").parents(".startbox").siblings(".endbox").addClass("hide")),n.callback&&n.callback(r);else{if(r.status!=-1)return t.tip.tips({htmlmsg:'<div style="padding:30px">'+r.msg+"</div>",w:"90%",type:0}),n.errcallback&&n.errcallback(),!1;e("#couponList-d").removeClass("show").addClass("hide"),e("#couponList").addClass("show"),t.tip.tips({htmlmsg:'<div style="padding:30px">'+r.msg+"</div>",w:"90%",type:0,scallback:function(){}})}}})},f=0,l=function(){r.ajaxInit({url:"/myorder/getcartmore.html",params:{ajax:1},callback:function(t){var n=t.data.shippinglist,r=t.data.paymentlist;f=t.data.myaddressid,e.each(n,function(t,n){var r='<div class="rowbox"><input data-role="none" name="shippingid" type="radio" value="'+n.id+'" id="'+n.id+'"><label for="'+n.id+'">'+n.name+"</label></div>";if(t==0)var r='<div class="rowbox"><input data-role="none" name="shippingid" type="radio" value="'+n.id+'" checked="checked" id="'+n.id+'"><label for="'+n.id+'">'+n.name+"</label></div>";e("#shippinglist").append(r)});var i=0;e.each(r,function(t,n){i++;var r='<div class="rowbox"><input data-role="none" name="paymentid" type="radio" value="'+n.id+'" checked="checked" id="'+n.id+'"><label for="'+n.id+'">'+n.name+"</label></div>";if(i==0)var r='<div class="rowbox">33<input data-role="none" name="paymentid" type="radio" value="'+n.id+'" checked="checked" id="'+n.id+'"><label for="'+n.id+'">'+n.name+"</label></div>";e("#paymentlist").append(r)})}})},c=function(){e("#paymentForm2").checkInput({submitBtnFn:function(n,i){var s=e("#newaddress").length;if(s>0)return e("#newaddress").addClass("error_validate"),t.tip.tips({htmlmsg:'<div style="padding:30px">请填写收货人信息</div>',w:"90%",type:0}),!1;t.base.loadInit({status:1});var o=e("#paymentForm2").attr("action"),u=n.serializeJson();r.ajaxInit({url:o,params:u,callback:function(e){e.status==1?window.location="/myorder/payorder.html?orderid="+e.data.orderid:t.tip.tips({htmlmsg:'<div style="padding:30px">'+e.msg+"</div>",w:"90%",type:0}),t.base.loadInit({status:0})}})}})};return s()}),define("cart_sub",function(){});