define([],function(){function ScrollPic(a){this.scrollContId=a.scrollContId,this.arrLeftId=a.arrLeftId,this.arrRightId=a.arrRightId,this.dotListId=a.dotListId,this.listType=a.listType,this.callback=a.callback,this.imgwcallback=a.imgwcallback,this.dotClassName="dotItem",this.dotOnClassName="dotItemOn",this.dotObjArr=[],this.listEvent="onclick",this.circularly=!0,this.pageWidth=0,this.frameWidth=0,this.speed=10,this.space=10,this.scrollWidth=5,this.upright=!1,this.pageIndex=0,this.autoPlay=a.autoPlay,this.autoPlayTime=5,this._autoTimeObj,this._scrollTimeObj,this._state="ready",this.stripDiv=document.createElement("DIV"),this.lDiv01=document.createElement("DIV"),this.lDiv02=document.createElement("DIV")}ScrollPic.prototype={version:"1.41",author:"king",pageLength:0,touch:!0,initialize:function(){var a=this;if(!this.scrollContId)throw new Error("必须指定scrollContId.");this.scDiv=this.$(this.scrollContId);if(!this.scDiv)throw new Error('scrollContId不是正确的对象.(scrollContId = "'+this.scrollContId+'")');this.scDiv.style[this.upright?"height":"width"]=this.frameWidth+"px",this.scDiv.style.overflow="hidden",this.imgwcallback(),this.lDiv01.innerHTML=this.scDiv.innerHTML,this.scDiv.innerHTML="",this.scDiv.appendChild(this.stripDiv),this.stripDiv.appendChild(this.lDiv01),this.circularly&&(this.stripDiv.appendChild(this.lDiv02),this.lDiv02.innerHTML=this.lDiv01.innerHTML),this.stripDiv.style.overflow="hidden",this.stripDiv.style.zoom="1",this.stripDiv.style[this.upright?"height":"width"]="32766px",this.upright||(this.lDiv01.style.cssFloat="left",this.lDiv01.style.styleFloat="left",this.lDiv01.style.overflow="hidden"),this.lDiv01.style.zoom="1",this.circularly&&!this.upright&&(this.lDiv02.style.cssFloat="left",this.lDiv02.style.styleFloat="left",this.lDiv02.style.overflow="hidden"),this.lDiv02.style.zoom="1",this.addEvent(this.scDiv,"mouseover",function(){a.stop()}),this.addEvent(this.scDiv,"mouseout",function(){a.play()}),this.arrLeftId&&(this.alObj=this.$(this.arrLeftId),this.alObj&&(this.addEvent(this.alObj,"mousedown",function(){a.rightMouseDown()}),this.addEvent(this.alObj,"mouseup",function(){a.rightEnd()}),this.addEvent(this.alObj,"mouseout",function(){a.rightEnd()}))),this.arrRightId&&(this.arObj=this.$(this.arrRightId),this.arObj&&(this.addEvent(this.arObj,"mousedown",function(){a.leftMouseDown()}),this.addEvent(this.arObj,"mouseup",function(){a.leftEnd()}),this.addEvent(this.arObj,"mouseout",function(){a.leftEnd()})));var b=$(this.scDiv).find(".mod_01").size()/2;this.pageLength=b;if(this.dotListId){this.dotListObj=this.$(this.dotListId),this.dotListObj.innerHTML="";if(this.dotListObj)for(i=0;i<b;i++)tempObj=document.createElement("span"),this.dotListObj.appendChild(tempObj),this.dotObjArr.push(tempObj),i==this.pageIndex?tempObj.className=this.dotOnClassName:tempObj.className=this.dotClassName,this.listType=="number"?tempObj.innerHTML=i+1:typeof this.listType=="string"?tempObj.innerHTML=this.listType:tempObj.innerHTML="",tempObj.title="第"+(i+1)+"页",tempObj.num=i,tempObj[this.listEvent]=function(){a.pageTo(this.num)}}this.scDiv[this.upright?"scrollTop":"scrollLeft"]=0,this.autoPlay&&this.play(),this._scroll=this.upright?"scrollTop":"scrollLeft",this._sWidth=this.upright?"scrollHeight":"scrollWidth",typeof this.onpagechange=="function"&&this.onpagechange(),this.iPad()},leftMouseDown:function(){if(this._state!="ready")return;var a=this;this._state="floating",clearInterval(this._scrollTimeObj),this.moveLeft(),this._scrollTimeObj=setInterval(function(){a.moveLeft()},this.speed)},rightMouseDown:function(){if(this._state!="ready")return;var a=this;this._state="floating",clearInterval(this._scrollTimeObj),this.moveRight(),this._scrollTimeObj=setInterval(function(){a.moveRight()},this.speed)},moveLeft:function(){this.circularly?this.scDiv[this._scroll]+this.space>=this.lDiv01[this._sWidth]?this.scDiv[this._scroll]=this.scDiv[this._scroll]+this.space-this.lDiv01[this._sWidth]:this.scDiv[this._scroll]+=this.space:this.scDiv[this._scroll]+this.space>=this.lDiv01[this._sWidth]-this.frameWidth?(this.scDiv[this._scroll]=this.lDiv01[this._sWidth]-this.frameWidth,this.leftEnd()):this.scDiv[this._scroll]+=this.space,this.accountPageIndex()},moveRight:function(){this.circularly?this.scDiv[this._scroll]-this.space<=0?this.scDiv[this._scroll]=this.lDiv01[this._sWidth]+this.scDiv[this._scroll]-this.space:this.scDiv[this._scroll]-=this.space:this.scDiv[this._scroll]-this.space<=0?(this.scDiv[this._scroll]=0,this.rightEnd()):this.scDiv[this._scroll]-=this.space,this.accountPageIndex()},leftEnd:function(){if(this._state!="floating"&&this._state!="touch")return;this._state="stoping",clearInterval(this._scrollTimeObj);var a=this.pageWidth-this.scDiv[this._scroll]%this.pageWidth;this.move(a)},rightEnd:function(){if(this._state!="floating"&&this._state!="touch")return;this._state="stoping",clearInterval(this._scrollTimeObj);var a=-this.scDiv[this._scroll]%this.pageWidth;this.move(a)},move:function(a,b){var c=this,d=a/5,e=!1;b||(d>this.space&&(d=this.space),d<-this.space&&(d=-this.space)),Math.abs(d)<1&&d!=0?d=d>=0?1:-1:d=Math.round(d);var f=this.scDiv[this._scroll]+d;d>0?this.circularly?this.scDiv[this._scroll]+d>=this.lDiv01[this._sWidth]?this.scDiv[this._scroll]=this.scDiv[this._scroll]+d-this.lDiv01[this._sWidth]:this.scDiv[this._scroll]+=d:this.scDiv[this._scroll]+d>=this.lDiv01[this._sWidth]-this.frameWidth?(this.scDiv[this._scroll]=this.lDiv01[this._sWidth]-this.frameWidth,this._state="ready",e=!0):this.scDiv[this._scroll]+=d:this.circularly?this.scDiv[this._scroll]+d<0?this.scDiv[this._scroll]=this.lDiv01[this._sWidth]+this.scDiv[this._scroll]+d:this.scDiv[this._scroll]+=d:this.scDiv[this._scroll]-d<0?(this.scDiv[this._scroll]=0,this._state="ready",e=!0):this.scDiv[this._scroll]+=d,typeof this.onpagechange=="function"&&this.onpagechange();if(e)return;a-=d;if(Math.abs(a)==0){this._state="ready",this.autoPlay&&this.play(),this.accountPageIndex();return}this.accountPageIndex(),this._scrollTimeObj=setTimeout(function(){c.move(a,b)},this.speed)},pre:function(){if(this._state!="ready")return;this._state="stoping",this.pageTo(this.pageIndex-1)},next:function(a){if(this._state!="ready")return;this._state="stoping",this.circularly?this.pageTo(this.pageIndex+1):this.scDiv[this._scroll]>=this.lDiv01[this._sWidth]-this.frameWidth?(this._state="ready",a&&this.pageTo(0)):this.pageTo(this.pageIndex+1)},play:function(){var a=this;if(!this.autoPlay)return;clearInterval(this._autoTimeObj),this._autoTimeObj=setInterval(function(){a.next(!0)},this.autoPlayTime*1e3)},stop:function(){clearInterval(this._autoTimeObj)},pageTo:function(a){if(this.pageIndex==a)return;a<0&&(a=this.pageLength-1),clearTimeout(this._scrollTimeObj),this._state="stoping";var b=a*this.frameWidth-this.scDiv[this._scroll];this.move(b,!0)},accountPageIndex:function(){var a=Math.floor(this.scDiv[this._scroll]/this.frameWidth);if(a==this.pageIndex)return;this.pageIndex=a,this.pageIndex>Math.floor(this.lDiv01[this.upright?"offsetHeight":"offsetWidth"]/this.frameWidth)&&(this.pageIndex=0),typeof this.onnowpage=="function"&&this.onnowpage(this.pageIndex);var b;for(b=0;b<this.dotObjArr.length;b++)b==this.pageIndex?(this.callback(b),this.dotObjArr[b].className=this.dotOnClassName):this.dotObjArr[b].className=this.dotClassName;typeof this.onpagechange=="function"&&this.onpagechange()},iPadX:0,iPadLastX:0,iPadStatus:"ok",iPad:function(){if(typeof window.ontouchstart=="undefined")return;if(!this.touch)return;var a=this;this.addEvent(this.scDiv,"touchstart",function(b){a._touchstart(b)}),this.addEvent(this.scDiv,"touchmove",function(b){a._touchmove(b)}),this.addEvent(this.scDiv,"touchend",function(b){a._touchend(b)})},_touchstart:function(a){this.stop(),this.iPadX=a.touches[0].pageX,this.iPadScrollX=window.pageXOffset,this.iPadScrollY=window.pageYOffset,this.scDivScrollLeft=this.scDiv[this._scroll]},_touchmove:function(a){if(a.touches.length>1){this.iPadStatus="ok";return}this.iPadLastX=a.touches[0].pageX;var b=this.iPadX-this.iPadLastX;if(this.iPadStatus=="ok"){if(!(this.iPadScrollY==window.pageYOffset&&this.iPadScrollX==window.pageXOffset&&Math.abs(b)>this.scrollWidth))return;this.iPadStatus="touch"}this._state="touch";var c=this.scDivScrollLeft+b;c>=this.lDiv01[this._sWidth]&&(c-=this.lDiv01[this._sWidth]),c<0&&(c+=this.lDiv01[this._sWidth]),this.scDiv[this._scroll]=c,a.preventDefault()},_touchend:function(a){if(this.iPadStatus!="touch")return;this.iPadStatus="ok";var b=this.iPadX-this.iPadLastX;b<0?this.rightEnd():this.leftEnd(),this.play()},$:function(objName){return document.getElementById?eval('document.getElementById("'+objName+'")'):eval("document.all."+objName)},isIE:navigator.appVersion.indexOf("MSIE")!=-1?!0:!1,addEvent:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},delEvent:function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},readCookie:function(a){var b="",c=a+"=";if(document.cookie.length>0){var d=document.cookie.indexOf(c);if(d!=-1){d+=c.length;var e=document.cookie.indexOf(";",d);e==-1&&(e=document.cookie.length),b=unescape(document.cookie.substring(d,e))}}return b},writeCookie:function(a,b,c,d){var e="",f="";c!=null&&(e=new Date((new Date).getTime()+c*36e5),e="; expires="+e.toGMTString()),d!=null&&(f=";domain="+d),document.cookie=a+"="+escape(b)+e+f},readStyle:function(a,b){if(a.style[b])return a.style[b];if(a.currentStyle)return a.currentStyle[b];if(document.defaultView&&document.defaultView.getComputedStyle){var c=document.defaultView.getComputedStyle(a,null);return c.getPropertyValue(b)}return null}}})