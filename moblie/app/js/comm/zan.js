define(["jquery","config","ajax"],function(e,t,n){var r=function(){e(".btn-praise").unbind("click").bind("click",function(){function l(e){n.ajaxInit({url:"/share/sharelikes.html?shid="+i,type:"GET",yzlogin:!0,dataType:"html",params:{},callback:function(t){f.html(t),e>0?(o.show(),f.find("img.avatar_lazy").checkImgExists(function(e,t){var n=e,r=t,i=n.parent(".useravatar_bg");i.css({background:"url("+r+") no-repeat","background-size":"cover"})})):o.hide()}})}var r=e(this).attr("data-like"),i=e(this).parents(".byshid").attr("data-shid"),s=e(this),o=e(this).parents(".byshid").find(".rowitem-zhan"),u=e(this).parents(".byshid").find(".zhannum"),a=Number(u.attr("data-zhannum")),f=e(this).parents(".byshid").find(".avatar-list");n.ajaxInit({url:"/share/like.html",yzlogin:!0,params:{shid:i,likevalue:r},callback:function(e){e.status&&(r==1?(s.removeClass("current"),s.attr("data-like","0"),s.find(".btn-praise-text").text(t.base.lang.js_shareView_like),a<=0?a=0:a-=1,u.text(a).attr("data-zhannum",a)):(s.addClass("current"),s.attr("data-like","1"),s.find(".btn-praise-text").text(t.base.lang.js_shareView_unlike),a+=1,u.text(a).attr("data-zhannum",a)))},errCallback:function(){s.removeClass("btn-loading")}})}),e(".btn-repeat").unbind("click").bind("click",function(){var r=e(this).parents(".byshid").attr("data-shid"),i=e(this).parents(".byshid").attr("data-ishid"),s=e(this).attr("data-bigimgurl"),o=e(this).attr("data-title"),u=e(this).attr("data-url");n.ajaxInit({url:"/common/gettpl.html?name=sns_repeat&ch=sns",isloading:!0,yzlogin:!0,type:"GET",dataType:"html",params:{},callback:function(n){e("body").append(n),t.tip.centerDiv({divId:"sns_repeat",type:1,callback:function(){var n="http://"+window.location.host;t.baiduShare({bdPic:s,bdText:o,url:n+"/share/sharepage.html?shid="+r+"&ukey="+ukey+"",title:o,desc:o,summary:o}),require(["comm/znshare"],function(n){n.znshare({shid:r,ishid:i,callback:function(){var n=e("#sns_repeat").attr("data-index");t.tip.centerDivClosed({indexNum:n,indexTipDiv:e("#sns_repeat"),type:1})}})}),e("#byshare_weixin").unbind("click").bind("click",function(){t.shareweinxtip({})})}})}})}),e(".btn-edit").unbind("click").bind("click",function(){var t=e(this).parents(".rowitem"),n=e(this).attr("data-shid"),r=e(this).attr("data-boradid");require(["comm/editShare"],function(e){e.editShareInit({shid:n,thisParent:t,boradid:r})})})};return{zanint:r}});