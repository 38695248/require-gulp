define(["jquery","config","ajax"],function(e,t,n){var r=function(){e(".followBtn").unbind("click").bind("click",function(){var r=e(this),i=e(this).attr("data-ishome"),s=e(this).attr("data-text"),o=r.attr("data-type"),u=r.attr("data-follow");r.addClass("btn-loading");var a="/share/follow_"+o+".html";if(o=="board")var f=r.attr("data-ucatid"),l={ucatid:f,followvalue:u};else if(o=="person")var c=r.attr("data-fsuid"),l={fsuid:c,followvalue:u};else if(o=="category")var h=r.attr("data-categoryid"),l={categoryid:h,followvalue:u};else if(o=="interests"){a="/share/follow_category.html";var h=r.attr("data-categoryid"),l={categoryid:h,followvalue:u}}else if(o=="want"){a="/share/want.html";var p=r.parents(".byshid").attr("data-shid"),l={shid:p,wantvalue:u}}else if(o=="group"){a="/user_group/follow.html";var d=r.attr("data-gpid"),l={gpid:d,wantvalue:u}}n.ajaxInit({url:a,yzlogin:!0,params:l,callback:function(e){r.removeClass("btn-loading"),e.status?u==1?(r.removeClass("current"),i||(o=="want"?r.text(t.base.lang.js_shareView_want):s?r.find(".text").text(t.base.lang.js_shareView_follow):r.text(t.base.lang.js_shareView_follow)),r.attr("data-follow",0)):(r.addClass("current"),i||(o=="want"?r.text(t.base.lang.js_shareView_unwant):s?r.find(".text").text(t.base.lang.js_shareView_unfollow):r.text(t.base.lang.js_shareView_unfollow)),r.attr("data-follow",1)):t.tip.tips({type:0,w:"96%",htmlmsg:'<div style="padding:20px 30px 20px">'+e.msg+"</div>"})},errCallback:function(){r.removeClass("btn-loading")}})})};return{followBtn:r}});