define(["jquery","config","ajax"],function(e,t,n){var r=function(){function t(t){var o=e('<div id="search-modalMask" class="modalMask" style="z-index:9996;display: block"></div>');e("body").append(o);var u="/common/gettpl.html?name=sns_searchinput&ch=sns";t.searchtype=="weixingroup"&&(u="/common/gettpl.html?name=sns_searchgroup&ch=sns"),n.ajaxInit({url:u,type:"GET",dataType:"html",params:{},callback:function(t){e("body").append(t);var o="goods";e("#searchinput").addClass("loaded"),e("#newsearchInt").focus(),e("#searchtyleval").val(o),r(),s(),i(),e("#qingkong_btn").unbind("click").bind("click",function(){n.ajaxInit({url:"/m_search/clearwords.html",params:"",callback:function(t){t.status==1&&(e("#searchTagbox").html(""),e("#qingkong_btn").hide())}})})}})}function r(){e("#s-input-tab-txt").unbind("click").bind("click",function(){var t=e("#J_TabNav").is(":hidden");t?e("#J_TabNav").show():e("#J_TabNav").hide()}),e("#s-input-tab-txt").find("li").unbind("click").bind("click",function(){var t=e(this).text(),n=e(this).attr("data-val");e("#s-input-val").text(t),e("#s-input-val").attr("data-type",n),e("#searchtyleval").val(n),s()})}function i(){e("#closeSearch,#search-modalMask").unbind("click").bind("click",function(){e("#searchinput").remove(),e("#search-modalMask").remove()})}function s(t){function s(){n.ajaxInit({url:"/m_search/getwordlists.html?t="+r+"&s="+i+"",params:{},callback:function(t){if(t.status){e("#searchTagbox").show();var n=t.data.keyword,s='<li class="li-title">历史记录</li>';i==""&&(s='<li class="li-title">历史记录</li>',e("#qingkong_btn").show()),e.each(n,function(e,t){s+='<li><a href="/m_search/search.html?t='+r+"&s="+encodeURIComponent(t.val)+'" data-val='+t.val+">"+t.val+"</a></li>"}),e("#searchTagbox").html(s)}else e("#searchTagbox").hide(),e("#qingkong_btn").hide()}})}var r=e("#searchtyleval").val(),i="";e("#newsearchInt").unbind("input").bind("input",function(){var t=e(this);r=e("#s-input-val").attr("data-type"),i=e.trim(t.val()),s()}),s()}e(".searchstart").unbind("focus").bind("focus",function(){var n=e(this).attr("data-placeholder"),r=e(this).attr("data-searchtype");t({placeholder:n,searchtype:r})}),e(".searchtop").unbind("click").bind("click",function(){var n=e(this).attr("data-placeholder"),r=e(this).attr("data-searchtype");t({placeholder:n,searchtype:r})})};return r()});