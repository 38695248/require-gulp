define(["jquery","config"],function(e,t){var n=function(n){var r={uid:"",username:""};n&&e.extend(r,n),e(".chatBtn").unbind("click").bind("click",function(){var n=r.uid,i=r.username;n||(n=e(this).attr("data-uid")),i||(i=e(this).attr("data-username"));if(n==suid)return t.tip.tips({type:0,htmlmsg:'<div style="padding:30px">'+lang.js_base_yourself+"</div>"}),!1;t.closeTip(e("#sns_more")),AjaxFunUtils.ajaxInit({url:"/common/gettpl.html?name=sns_chat&ch=sns",type:"GET",yzlogin:!0,isloading:!0,dataType:"html",params:{},callback:function(r){e("body").append(r),e("#title_username").html('<a href="/share/myshares.html?fsuid='+n+"&ukey="+ukey+'">'+i+"</a>"),t.tip.centerDiv({divId:"chatbox",type:1,w:"95%",position:"absolute",p_new:1,callback:function(){var r=t.base.getHeightBody()-230;e("#msgListBox").css({height:r}),MsgMod.msgInit({uid:n})},closeback:function(){}})}})})};return{chatBtn:n}});