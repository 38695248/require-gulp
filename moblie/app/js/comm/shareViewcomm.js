define(["jquery","config","base","ajax","comm/sel_sku","comm/zan","comm/followBtn","swiper","baguettebox","lazyload","checkInput","checkboxFn","serializeJson","setTagPos"],function(e,t,n,r,i,s,o){var u=function(t){n.init();var r=e("#gdid").val();r?l():require(["comm/comments"],function(e){e.init()});if(e("#goods").val()==1){f();var r=e("#gdid").val();i.init({gdid:r}),a()}else e("#sharePicImgBox").find(".mod_01").setTagPos(),e("#sharedescbox").find(".imgtag").each(function(t,n){e(this).setTagPos()});e("#masonry-tj").size()>0&&MasonryUtils.masonryInit({masonry:"masonry-tj",islazy:1,callback:function(){}}),e("img.avatar_lazy").checkImgExists(function(e,t){var n=e,r=t,i=n.parent(".useravatar_bg");i.css({background:"url("+r+") no-repeat","background-size":"cover"})}),s.zanint(),o.followBtn()},a=function(){var t=e("#tjcp_list").attr("data-url");r.ajaxInit({url:t,type:"GET",dataType:"html",params:{ajax:1},callback:function(t){if(!t)return e("#tjcp_list_box").hide(),!1;e("#tjcp_list").append(t),e("#tjcp_list").find("img.lazy-mas").lazyload({effect:"fadeIn",threshold:100,failurelimit:20})}})},f=function(){function n(){var n=t.base.getHeightBody(),r=n*.7;return e("#sliderbox_view").css({height:r}),r}n();var r=new Swiper("#sliderbox_view",{autoplay:!1,pagination:".slide_01_dot_view",loop:!0,loopAdditionalSlides:1,onInit:function(t){var n=e("#sliderbox_view").height(),r=e("#sliderbox_view").width();e("#sliderbox_view").find("img").each(function(t,i){e(this).addClass("img_"+t);var s=new Image;s.src=e(this).attr("src"),s.onload=function(){var i=s.height,o=s.width,u=o/i;u>=1?(i=n,o=i*u):(o=r,i=o/u),e(".img_"+t).css({height:i,width:o})}}),e("#viewPicImgBox").find(".mod_01").each(function(t,n){e(this).setTagPos()})}});baguetteBox.run(".baguetteBoxOne")},l=function(e){r.ajaxInit({url:"/b_goods/gdcomment_tbk.html",params:{gdid:e},callback:function(e){}})};return{shareViewcomm:u}});